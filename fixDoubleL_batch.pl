#!/usr/bin/perl

use strict;
use warnings;
use 5.18.0;

# Usage:  
    # 1st Argument: The file to clean

print STDOUT "Run at " . localtime() . "\n\n";

# a function to remove duplicates from an array
sub uniq (@) {
    # From CPAN List::MoreUtils, version 0.22
    my %h;
    map { $h{$_}++ == 0 ? $_ : () } @_;
}

# Get the list of txt or html files in the html directory
my @textfiles;
opendir my $dh, "html" or die "Can't open directory: $!";

while ( readdir $dh ) {
    chomp;
    next if $_ eq '.' or $_ eq '..' or $_ =~ m/_clean\./ or $_ !~ m/\.(html|txt)$/;    
    my $textfile = $_;
    push(@textfiles, $textfile);
    next;
}
my $numfiles = scalar @textfiles;

print STDOUT "There are $numfiles file(s) to process: ";
print STDOUT join "; ", @textfiles;
print STDOUT ".\n";

# List of replacement words
my %replace = (
    "intercol egiate" => "intercollegiate",
    "crystal ography" => "crystallography",
    "intel ectualism" => "intellectualism",
    "unchal engeable" => "unchallengeable",
    "polycrystal ine" => "polycrystalline",
    "methylcel ulose" => "methylcellulose",
    "montmoril onite" => "montmorillonite",
    "intel ectualize" => "intellectualize",
    "hydrometal urgy" => "hydrometallurgy",
    "whatchamacal it" => "whatchamacallit",
    "monocrystal ine" => "monocrystalline",
    "streptobacil us" => "streptobacillus",
    "hendecasyl abic" => "hendecasyllabic",
    "chorioal antois" => "chorioallantois",
    "septendecil ion" => "septendecillion",
    "postmil enarian" => "postmillenarian",
    "microsporophyl " => "microsporophyll",
    "chorioal antoic" => "chorioallantoic",
    "chronological y" => "chronologically",
    "circumval ating" => "circumvallating",
    "circumval ation" => "circumvallation",
    "chemotactical y" => "chemotactically",
    "cholinergical y" => "cholinergically",
    "chancel orships" => "chancellorships",
    "cataclysmical y" => "cataclysmically",
    "col ateralizing" => "collateralizing",
    "col ateralities" => "collateralities",
    "coenzymatical y" => "coenzymatically",
    "coeducational y" => "coeducationally",
    "col aboratively" => "collaboratively",
    "col ectednesses" => "collectednesses",
    "col enchymatous" => "collenchymatous",
    "al otetraploids" => "allotetraploids",
    "al otetraploidy" => "allotetraploidy",
    "al ergenicities" => "allergenicities",
    "al egoricalness" => "allegoricalness",
    "al egorizations" => "allegorizations",
    "al elomorphisms" => "allelomorphisms",
    "algorithmical y" => "algorithmically",
    "aerodynamical y" => "aerodynamically",
    "architectural y" => "architecturally",
    "autographical y" => "autographically",
    "autotrophical y" => "autotrophically",
    "astronautical y" => "astronautically",
    "astrophysical y" => "astrophysically",
    "atmospherical y" => "atmospherically",
    "anisotropical y" => "anisotropically",
    "animatronical y" => "animatronically",
    "apocalyptical y" => "apocalyptically",
    "anacoluthical y" => "anacoluthically",
    "bidirectional y" => "bidirectionally",
    "bathymetrical y" => "bathymetrically",
    "biomechanical y" => "biomechanically",
    "bougainvil aeas" => "bougainvillaeas",
    "hendecasyl able" => "hendecasyllable",
    "hemoflagel ates" => "hemoflagellates",
    "hemodynamical y" => "hemodynamically",
    "hermeneutical y" => "hermeneutically",
    "heterothal isms" => "heterothallisms",
    "histochemical y" => "histochemically",
    "heliometrical y" => "heliometrically",
    "hydrostatical y" => "hydrostatically",
    "hypercritical y" => "hypercritically",
    "ideographical y" => "ideographically",
    "il imitableness" => "illimitableness",
    "il iberalnesses" => "illiberalnesses",
    "il egalizations" => "illegalizations",
    "horticultural y" => "horticulturally",
    "homeopathical y" => "homeopathically",
    "holographical y" => "holographically",
    "intel ectualist" => "intellectualist",
    "intel ectuality" => "intellectuality",
    "institutional y" => "institutionally",
    "inquisitorial y" => "inquisitorially",
    "inspirational y" => "inspirationally",
    "infinitesimal y" => "infinitesimally",
    "informational y" => "informationally",
    "intercultural y" => "interculturally",
    "intel igentsias" => "intelligentsias",
    "intel igibility" => "intelligibility",
    "international y" => "internationally",
    "interpel ations" => "interpellations",
    "interpersonal y" => "interpersonally",
    "intracerebral y" => "intracerebrally",
    "intracel ularly" => "intracellularly",
    "infal ibilities" => "infallibilities",
    "immunological y" => "immunologically",
    "il ustriousness" => "illustriousness",
    "il ogicalnesses" => "illogicalnesses",
    "ionospherical y" => "ionospherically",
    "crystal ization" => "crystallization",
    "crystal inities" => "crystallinities",
    "cytogenetical y" => "cytogenetically",
    "cytoplasmical y" => "cytoplasmically",
    "demographical y" => "demographically",
    "developmental y" => "developmentally",
    "diastrophical y" => "diastrophically",
    "defibril ations" => "defibrillations",
    "uncontrol able" => "uncontrollable",
    "intel igentsia" => "intelligentsia",
    "unintel igible" => "unintelligible",
    "hypoal ergenic" => "hypoallergenic",
    "nitrocel ulose" => "nitrocellulose",
    "organometal ic" => "organometallic",
    "dinoflagel ate" => "dinoflagellate",
    "bougainvil aea" => "bougainvillaea",
    "vitel ogenesis" => "vitellogenesis",
    "paral elepiped" => "parallelepiped",
    "monopropel ant" => "monopropellant",
    "postmil ennial" => "postmillennial",
    "lignocel ulose" => "lignocellulose",
    "pyrometal urgy" => "pyrometallurgy",
    "interpupil ary" => "interpupillary",
    "incontrol able" => "incontrollable",
    "premil enarian" => "premillenarian",
    "heterophyl ous" => "heterophyllous",
    "hemoflagel ate" => "hemoflagellate",
    "megasporophyl " => "megasporophyll",
    "novemdecil ion" => "novemdecillion",
    "bougainvil eas" => "bougainvilleas",
    "bouil abaisses" => "bouillabaisses",
    "brail ewriters" => "braillewriters",
    "biogenetical y" => "biogenetically",
    "biographical y" => "biographically",
    "bolometrical y" => "bolometrically",
    "bul headedness" => "bullheadedness",
    "cal igraphists" => "calligraphists",
    "barometrical y" => "barometrically",
    "bel igerencies" => "belligerencies",
    "bestsel erdoms" => "bestsellerdoms",
    "al elomorphism" => "allelomorphism",
    "al egorization" => "allegorization",
    "agricultural y" => "agriculturally",
    "aeronautical y" => "aeronautically",
    "adrenergical y" => "adrenergically",
    "achromatical y" => "achromatically",
    "adaptational y" => "adaptationally",
    "al opatrical y" => "allopatrically",
    "al opolyploids" => "allopolyploids",
    "al opolyploidy" => "allopolyploidy",
    "al osterical y" => "allosterically",
    "al otetraploid" => "allotetraploid",
    "al oantibodies" => "alloantibodies",
    "al iteratively" => "alliteratively",
    "bactericidal y" => "bactericidally",
    "autocratical y" => "autocratically",
    "astrological y" => "astrologically",
    "astronomical y" => "astronomically",
    "asymptotical y" => "asymptotically",
    "asymmetrical y" => "asymmetrically",
    "apotropaical y" => "apotropaically",
    "arithmetical y" => "arithmetically",
    "antipol utions" => "antipollutions",
    "antithetical y" => "antithetically",
    "antiseptical y" => "antiseptically",
    "antibiotical y" => "antibiotically",
    "antidromical y" => "antidromically",
    "aphoristical y" => "aphoristically",
    "apologetical y" => "apologetically",
    "apoplectical y" => "apoplectically",
    "aposematical y" => "aposematically",
    "anthophyl ites" => "anthophyllites",
    "antial ergeni" => "antiallergeni",
    "canchoritical y" => "canchoritically",
    "anesthetical y" => "anesthetically",
    "altruistical y" => "altruistically",
    "alphabetical y" => "alphabetically",
    "aminophyl ines" => "aminophyllines",
    "al usivenesses" => "allusivenesses",
    "col eagueships" => "colleagueships",
    "col ectivistic" => "collectivistic",
    "col ectivising" => "collectivising",
    "col ectivities" => "collectivities",
    "col ectivizing" => "collectivizing",
    "col ectorships" => "collectorships",
    "col egialities" => "collegialities",
    "col ieshangies" => "collieshangies",
    "col inearities" => "collinearities",
    "col apsibility" => "collapsibility",
    "col ateralized" => "collateralized",
    "col ateralizes" => "collateralizes",
    "coincidental y" => "coincidentally",
    "col aboratives" => "collaboratives",
    "col aborations" => "collaborations",
    "cobel igerents" => "cobelligerents",
    "chancel orship" => "chancellorship",
    "circumval ated" => "circumvallated",
    "circumval ates" => "circumvallates",
    "chlorophyl ous" => "chlorophyllous",
    "cataleptical y" => "cataleptically",
    "hemicel uloses" => "hemicelluloses",
    "hemerocal ises" => "hemerocallises",
    "heterophyl ies" => "heterophyllies",
    "heterosexual y" => "heterosexually",
    "heterothal ism" => "heterothallism",
    "hierarchical y" => "hierarchically",
    "histrionical y" => "histrionically",
    "miscel aneous" => "miscellaneous",
    "constel ation" => "constellation",
    "intracel ular" => "intracellular",
    "extracel ular" => "extracellular",
    "defibril ator" => "defibrillator",
    "maxil ofacial" => "maxillofacial",
    "intel igencer" => "intelligencer",
    "embel ishment" => "embellishment",
    "col ateralize" => "collateralize",
    "hal ucinatory" => "hallucinatory",
    "hal ucination" => "hallucination",
    "intercel ular" => "intercellular",
    "scintil ation" => "scintillation",
    "multicel ular" => "multicellular",
    "salmonel osis" => "salmonellosis",
    "nul ification" => "nullification",
    "unintel igent" => "unintelligent",
    "tonsil ectomy" => "tonsillectomy",
    "bouil abaisse" => "bouillabaisse",
    "bougainvil ea" => "bougainvillea",
    "aspergil osis" => "aspergillosis",
    "paral elogram" => "parallelogram",
    "unembel ished" => "unembellished",
    "lactobacil us" => "lactobacillus",
    "tortoiseshel " => "tortoiseshell",
    "phal ocentric" => "phallocentric",
    "pusil animous" => "pusillanimous",
    "unchal enging" => "unchallenging",
    "col oquialism" => "colloquialism",
    "metal ography" => "metallography",
    "metal iferous" => "metalliferous",
    "hemicel ulose" => "hemicellulose",
    "antipol ution" => "antipollution",
    "mil ionairess" => "millionairess",
    "supercol ider" => "supercollider",
    "premil ennial" => "premillennial",
    "pusil animity" => "pusillanimity",
    "penicil amine" => "penicillamine",
    "circumstel ar" => "circumstellar",
    "penicil inase" => "penicillinase",
    "antisatel ite" => "antisatellite",
    "anticol ision" => "anticollision",
    "recrystal ize" => "recrystallize",
    "aminophyl ine" => "aminophylline",
    "quadril ionth" => "quadrillionth",
    "pointil istic" => "pointillistic",
    "jol ification" => "jollification",
    "umbel iferous" => "umbelliferous",
    "crenel ations" => "crenellations",
    "circumval ate" => "circumvallate",
    "cobel igerent" => "cobelligerent",
    "heterothal ic" => "heterothallic",
    "tropocol agen" => "tropocollagen",
    "sporopol enin" => "sporopollenin",
    "lamel ibranch" => "lamellibranch",
    "al opolyploid" => "allopolyploid",
    "quintil ionth" => "quintillionth",
    "quindecil ion" => "quindecillion",
    "monometal ism" => "monometallism",
    "octodecil ion" => "octodecillion",
    "al omorphisms" => "allomorphisms",
    "al iterations" => "alliterations",
    "al ergenicity" => "allergenicity",
    "agonistical y" => "agonistically",
    "agronomical y" => "agronomically",
    "aesthetical y" => "aesthetically",
    "affectional y" => "affectionally",
    "abiogenical y" => "abiogenically",
    "adiabatical y" => "adiabatically",
    "acronymical y" => "acronymically",
    "acrobatical y" => "acrobatically",
    "al egorical y" => "allegorically",
    "al elomorphic" => "allelomorphic",
    "al elopathies" => "allelopathies",
    "algebraical y" => "algebraically",
    "alcoholical y" => "alcoholically",
    "al otypical y" => "allotypically",
    "antigenical y" => "antigenically",
    "antiguerril a" => "antiguerrilla",
    "antibil board" => "antibillboard",
    "anticel ulite" => "anticellulite",
    "apodictical y" => "apodictically",
    "apathetical y" => "apathetically",
    "aperiodical y" => "aperiodically",
    "apomictical y" => "apomictically",
    "anecdotical y" => "anecdotically",
    "anaerobical y" => "anaerobically",
    "anaphorical y" => "anaphorically",
    "anthophyl ite" => "anthophyllite",
    "aspergil oses" => "aspergilloses",
    "asthmatical y" => "asthmatically",
    "arthritical y" => "arthritically",
    "aptitudinal y" => "aptitudinally",
    "appel atively" => "appellatively",
    "backpedal ing" => "backpedalling",
    "axiological y" => "axiologically",
    "axiomatical y" => "axiomatically",
    "authentical y" => "authentically",
    "avocational y" => "avocationally",
    "intel igence" => "intelligence",
    "intel ectual" => "intellectual",
    "instal ation" => "installation",
    "occasional y" => "occasionally",
    "il ustration" => "illustration",
    "surveil ance" => "surveillance",
    "cancel ation" => "cancellation",
    "unparal eled" => "unparalleled",
    "incidental y" => "incidentally",
    "il umination" => "illumination",
    "uncontrol ed" => "uncontrolled",
    "il egitimate" => "illegitimate",
    "recol ection" => "recollection",
    "il ustrative" => "illustrative",
    "unchal enged" => "unchallenged",
    "intel igible" => "intelligible",
    "tranquil ity" => "tranquillity",
    "distil ation" => "distillation",
    "multimil ion" => "multimillion",
    "fibril ation" => "fibrillation",
    "col ectivism" => "collectivism",
    "interstel ar" => "interstellar",
    "il egitimacy" => "illegitimacy",
    "col egiality" => "collegiality",
    "col ectivity" => "collectivity",
    "oscil oscope" => "oscilloscope",
    "bel igerence" => "belligerence",
    "al iteration" => "alliteration",
    "theophyl ine" => "theophylline",
    "monosyl abic" => "monosyllabic",
    "flagel ation" => "flagellation",
    "al iterative" => "alliterative",
    "vaudevil ian" => "vaudevillian",
    "artil eryman" => "artilleryman",
    "smal holding" => "smallholding",
    "polysyl abic" => "polysyllabic",
    "antiparal el" => "antiparallel",
    "skul duggery" => "skullduggery",
    "wol astonite" => "wollastonite",
    "il uminative" => "illuminative",
    "hal ucinogen" => "hallucinogen",
    "bipropel ant" => "bipropellant",
    "bil ingsgate" => "billingsgate",
    "fol owership" => "followership",
    "scintil ator" => "scintillator",
    "hydrocol oid" => "hydrocolloid",
    "fol iculitis" => "folliculitis",
    "intel ection" => "intellection",
    "whippoorwil " => "whippoorwill",
    "sarsaparil a" => "sarsaparilla",
    "defibril ate" => "defibrillate",
    "petrodol ars" => "petrodollars",
    "bel igerency" => "belligerency",
    "argil aceous" => "argillaceous",
    "oscil ograph" => "oscillograph",
    "monosyl able" => "monosyllable",
    "col ectivize" => "collectivize",
    "interpel ate" => "interpellate",
    "mul igatawny" => "mulligatawny",
    "intel ective" => "intellective",
    "submaxil ary" => "submaxillary",
    "mol uscicide" => "molluscicide",
    "hemerocal is" => "hemerocallis",
    "pyrophyl ite" => "pyrophyllite",
    "gal inaceous" => "gallinaceous",
    "yel owhammer" => "yellowhammer",
    "cel ulolytic" => "cellulolytic",
    "unal eviated" => "unalleviated",
    "biflagel ate" => "biflagellate",
    "compel ation" => "compellation",
    "yel owthroat" => "yellowthroat",
    "verticil ate" => "verticillate",
    "caril onneur" => "carillonneur",
    "polysyl able" => "polysyllable",
    "miscel anist" => "miscellanist",
    "monometal ic" => "monometallic",
    "metal ophone" => "metallophone",
    "octosyl able" => "octosyllable",
    "capercail ie" => "capercaillie",
    "banderil ero" => "banderillero",
    "bril iantine" => "brilliantine",
    "al oantibody" => "alloantibody",
    "col ywobbles" => "collywobbles",
    "decasyl able" => "decasyllable",
    "duodecil ion" => "duodecillion",
    "gal igaskins" => "galligaskins",
    "hal ucinosis" => "hallucinosis",
    "hel grammite" => "hellgrammite",
    "pral tril er" => "pralltriller",
    "symmetal ism" => "symmetallism",
    "schoolfel ow" => "schoolfellow",
    "sexdecil ion" => "sexdecillion",
    "smal clothes" => "smallclothes",
    "snol ygoster" => "snollygoster",
    "shel fishery" => "shellfishery",
    "tel urometer" => "tellurometer",
    "tredecil ion" => "tredecillion",
    "trophal axis" => "trophallaxis",
    "turbel arian" => "turbellarian",
    "intel igent" => "intelligent",
    "chal enging" => "challenging",
    "practical y" => "practically",
    "instal ment" => "installment",
    "col aborate" => "collaborate",
    "col ectible" => "collectible",
    "mil ionaire" => "millionaire",
    "caterpil ar" => "caterpillar",
    "crystal ine" => "crystalline",
    "il ustrious" => "illustrious",
    "comptrol er" => "comptroller",
    "unfulfil ed" => "unfulfilled",
    "col ocation" => "collocation",
    "bil ionaire" => "billionaire",
    "storytel er" => "storyteller",
    "paral elism" => "parallelism",
    "oscil ation" => "oscillation",
    "bel igerent" => "belligerent",
    "al egorical" => "allegorical",
    "methicil in" => "methicillin",
    "racquetbal " => "racquetball",
    "mil isecond" => "millisecond",
    "groundswel " => "groundswell",
    "crystal ize" => "crystallize",
    "appel ation" => "appellation",
    "cal igraphy" => "calligraphy",
    "col ectable" => "collectable",
    "uncol ected" => "uncollected",
    "disil usion" => "disillusion",
    "bul etproof" => "bulletproof",
    "chlorophyl " => "chlorophyll",
    "nonmetal ic" => "nonmetallic",
    "amoxicil in" => "amoxicillin",
    "marshmal ow" => "marshmallow",
    "noncal able" => "noncallable",
    "steamrol er" => "steamroller",
    "aspergil us" => "aspergillus",
    "il uminator" => "illuminator",
    "tonsil itis" => "tonsillitis",
    "crestfal en" => "crestfallen",
    "chancel ery" => "chancellery",
    "misspel ing" => "misspelling",
    "subcel ular" => "subcellular",
    "gal bladder" => "gallbladder",
    "mil enarian" => "millenarian",
    "quadril ion" => "quadrillion",
    "il usionism" => "illusionism",
    "il usionist" => "illusionist",
    "mel ifluous" => "mellifluous",
    "penicil ium" => "penicillium",
    "ratatouil e" => "ratatouille",
    "brucel osis" => "brucellosis",
    "chanterel e" => "chanterelle",
    "col agenase" => "collagenase",
    "subparal el" => "subparallel",
    "shigel osis" => "shigellosis",
    "unicel ular" => "unicellular",
    "semiskil ed" => "semiskilled",
    "castel ated" => "castellated",
    "crystal ite" => "crystallite",
    "tagliatel e" => "tagliatelle",
    "swal owtail" => "swallowtail",
    "pointil ism" => "pointillism",
    "torticol is" => "torticollis",
    "cappel etti" => "cappelletti",
    "hal ucinate" => "hallucinate",
    "miscel anea" => "miscellanea",
    "al opurinol" => "allopurinol",
    "spel binder" => "spellbinder",
    "decol etage" => "decolletage",
    "syl ogistic" => "syllogistic",
    "zil ionaire" => "zillionaire",
    "quintil ion" => "quintillion",
    "mil iampere" => "milliampere",
    "capil arity" => "capillarity",
    "il uminance" => "illuminance",
    "bal etomane" => "balletomane",
    "amoxycil in" => "amoxycillin",
    "cloxacil in" => "cloxacillin",
    "col ectanea" => "collectanea",
    "violoncel o" => "violoncello",
    "petrodol ar" => "petrodollar",
    "sil imanite" => "sillimanite",
    "misal ocate" => "misallocate",
    "cockleshel " => "cockleshell",
    "rapscal ion" => "rapscallion",
    "amontil ado" => "amontillado",
    "flagel ated" => "flagellated",
    "surveil ant" => "surveillant",
    "crystal oid" => "crystalloid",
    "il imitable" => "illimitable",
    "scintil ate" => "scintillate",
    "chancel ory" => "chancellory",
    "dril master" => "drillmaster",
    "gal imaufry" => "gallimaufry",
    "misal iance" => "misalliance",
    "caudil ismo" => "caudillismo",
    "gibberel in" => "gibberellin",
    "mil imicron" => "millimicron",
    "especial y" => "especially",
    "col ection" => "collection",
    "eventual y" => "eventually",
    "original y" => "originally",
    "material y" => "materially",
    "enrol ment" => "enrollment",
    "personal y" => "personally",
    "col ective" => "collective",
    "excel ence" => "excellence",
    "chal enged" => "challenged",
    "control er" => "controller",
    "compel ing" => "compelling",
    "il ustrate" => "illustrate",
    "chancel or" => "chancellor",
    "basketbal " => "basketball",
    "mil ennium" => "millennium",
    "col ateral" => "collateral",
    "fel owship" => "fellowship",
    "al egiance" => "allegiance",
    "chal enger" => "challenger",
    "mil imeter" => "millimeter",
    "bril iance" => "brilliance",
    "al egation" => "allegation",
    "vol eybal " => "volleyball",
    "col egiate" => "collegiate",
    "il uminate" => "illuminate",
    "council or" => "councillor",
    "booksel er" => "bookseller",
    "standstil " => "standstill",
    "rebel ious" => "rebellious",
    "il iterate" => "illiterate",
    "salmonel a" => "salmonella",
    "penicil in" => "penicillin",
    "metal urgy" => "metallurgy",
    "il iteracy" => "illiteracy",
    "bel wether" => "bellwether",
    "bel flower" => "bellflower",
    "infal ible" => "infallible",
    "pal iative" => "palliative",
    "guil otine" => "guillotine",
    "antebel um" => "antebellum",
    "vaudevil e" => "vaudeville",
    "col oquial" => "colloquial",
    "il egality" => "illegality",
    "mozzarel a" => "mozzarella",
    "bal player" => "ballplayer",
    "distil ery" => "distillery",
    "col arbone" => "collarbone",
    "real ocate" => "reallocate",
    "mil iliter" => "milliliter",
    "spel bound" => "spellbound",
    "cel ophane" => "cellophane",
    "portobel o" => "portobello",
    "rol icking" => "rollicking",
    "al ogeneic" => "allogeneic",
    "underbel y" => "underbelly",
    "vil ainous" => "villainous",
    "cordil era" => "cordillera",
    "windowsil " => "windowsill",
    "hal elujah" => "hallelujah",
    "col oquium" => "colloquium",
    "miscel any" => "miscellany",
    "fal acious" => "fallacious",
    "propel ant" => "propellant",
    "cerebel um" => "cerebellum",
    "bal istics" => "ballistics",
    "wel spring" => "wellspring",
    "painkil er" => "painkiller",
    "rockabil y" => "rockabilly",
    "butterbal " => "butterball",
    "indwel ing" => "indwelling",
    "yel owtail" => "yellowtail",
    "cel ulitis" => "cellulitis",
    "fol icular" => "follicular",
    "ampicil in" => "ampicillin",
    "hul abaloo" => "hullabaloo",
    "cancel ous" => "cancellous",
    "cannonbal " => "cannonball",
    "stil birth" => "stillbirth",
    "distil ate" => "distillate",
    "klebsiel a" => "klebsiella",
    "bimetal ic" => "bimetallic",
    "col imator" => "collimator",
    "quesadil a" => "quesadilla",
    "unpol uted" => "unpolluted",
    "bel adonna" => "belladonna",
    "wal flower" => "wallflower",
    "pil owcase" => "pillowcase",
    "tarantel a" => "tarantella",
    "ebul ience" => "ebullience",
    "centil ion" => "centillion",
    "tattersal " => "tattersall",
    "mil stream" => "millstream",
    "phyl oxera" => "phylloxera",
    "al egretto" => "allegretto",
    "mil wright" => "millwright",
    "tortel ini" => "tortellini",
    "smal mouth" => "smallmouth",
    "buckybal s" => "buckyballs",
    "fol owing" => "following",
    "general y" => "generally",
    "excel ent" => "excellent",
    "chal enge" => "challenge",
    "virtual y" => "virtually",
    "col ected" => "collected",
    "satel ite" => "satellite",
    "natural y" => "naturally",
    "pol ution" => "pollution",
    "al owance" => "allowance",
    "basical y" => "basically",
    "partial y" => "partially",
    "bril iant" => "brilliant",
    "literal y" => "literally",
    "hopeful y" => "hopefully",
    "col eague" => "colleague",
    "col ector" => "collector",
    "unwil ing" => "unwilling",
    "col ision" => "collision",
    "shortfal " => "shortfall",
    "ancil ary" => "ancillary",
    "al eviate" => "alleviate",
    "rebel ion" => "rebellion",
    "artil ery" => "artillery",
    "appal ing" => "appalling",
    "al otment" => "allotment",
    "intel ect" => "intellect",
    "guerril a" => "guerrilla",
    "wal paper" => "wallpaper",
    "appel ate" => "appellate",
    "waterfal " => "waterfall",
    "unskil ed" => "unskilled",
    "jewel ery" => "jewellery",
    "bal istic" => "ballistic",
    "bil board" => "billboard",
    "cel ulose" => "cellulose",
    "hil crest" => "hillcrest",
    "pal adium" => "palladium",
    "al ocable" => "allocable",
    "corol ary" => "corollary",
    "stil ness" => "stillness",
    "col usion" => "collusion",
    "capil ary" => "capillary",
    "il ogical" => "illogical",
    "bal erina" => "ballerina",
    "propel er" => "propeller",
    "shel fish" => "shellfish",
    "treadmil " => "treadmill",
    "marseil e" => "marseille",
    "medal ion" => "medallion",
    "pol utant" => "pollutant",
    "forestal " => "forestall",
    "repel ent" => "repellent",
    "gal oping" => "galloping",
    "mil ionth" => "millionth",
    "mal eable" => "malleable",
    "appel ant" => "appellant",
    "ayatol ah" => "ayatollah",
    "al igator" => "alligator",
    "nightfal " => "nightfall",
    "cel uloid" => "celluloid",
    "bombshel " => "bombshell",
    "clamshel " => "clamshell",
    "bul dozer" => "bulldozer",
    "bil iards" => "billiards",
    "retel ing" => "retelling",
    "ebul ient" => "ebullient",
    "stairwel " => "stairwell",
    "il egible" => "illegible",
    "medal ist" => "medallist",
    "cel ulite" => "cellulite",
    "jel yfish" => "jellyfish",
    "tel uride" => "telluride",
    "col egial" => "collegial",
    "yel owish" => "yellowish",
    "wil power" => "willpower",
    "paintbal " => "paintball",
    "mil igram" => "milligram",
    "mil stone" => "millstone",
    "wal board" => "wallboard",
    "cabal ero" => "caballero",
    "beryl ium" => "beryllium",
    "guildhal " => "guildhall",
    "recol ect" => "recollect",
    "bil ionth" => "billionth",
    "stil born" => "stillborn",
    "col ation" => "collation",
    "embel ish" => "embellish",
    "spil over" => "spillover",
    "gal antry" => "gallantry",
    "bal point" => "ballpoint",
    "cel phone" => "cellphone",
    "oscil ate" => "oscillate",
    "schil ing" => "schilling",
    "screwbal " => "screwball",
    "bel icose" => "bellicose",
    "stonewal " => "stonewall",
    "reinstal " => "reinstall",
    "papil oma" => "papilloma",
    "trackbal " => "trackball",
    "actual y" => "actually",
    "al iance" => "alliance",
    "footbal " => "football",
    "firewal " => "firewall",
    "paral el" => "parallel",
    "goodwil " => "goodwill",
    "cel ular" => "cellular",
    "bul etin" => "bulletin",
    "col apse" => "collapse",
    "foothil " => "foothill",
    "basebal " => "baseball",
    "umbrel a" => "umbrella",
    "spel ing" => "spelling",
    "al ocate" => "allocate",
    "il usion" => "illusion",
    "dwel ing" => "dwelling",
    "hil side" => "hillside",
    "tril ion" => "trillion",
    "metal ic" => "metallic",
    "bal room" => "ballroom",
    "swel ing" => "swelling",
    "hal mark" => "hallmark",
    "farewel " => "farewell",
    "fastbal " => "fastball",
    "thril er" => "thriller",
    "bal park" => "ballpark",
    "landfil " => "landfill",
    "rainfal " => "rainfall",
    "downhil " => "downhill",
    "unbil ed" => "unbilled",
    "al ergic" => "allergic",
    "syl abus" => "syllabus",
    "downfal " => "downfall",
    "col agen" => "collagen",
    "windfal " => "windfall",
    "nutshel " => "nutshell",
    "ful back" => "fullback",
    "syl able" => "syllable",
    "al egory" => "allegory",
    "il usory" => "illusory",
    "smal pox" => "smallpox",
    "fol ower" => "follower",
    "pul back" => "pullback",
    "shil ing" => "shilling",
    "al usion" => "allusion",
    "schil er" => "schiller",
    "gal eria" => "galleria",
    "rol back" => "rollback",
    "snowbal " => "snowball",
    "stal ion" => "stallion",
    "wel ness" => "wellness",
    "softbal " => "softball",
    "unfil ed" => "unfilled",
    "tril ium" => "trillium",
    "hardbal " => "hardball",
    "hal owed" => "hallowed",
    "cal back" => "callback",
    "windmil " => "windmill",
    "al uvial" => "alluvial",
    "rol over" => "rollover",
    "doorbel " => "doorbell",
    "bul shit" => "bullshit",
    "gul ible" => "gullible",
    "overkil " => "overkill",
    "sidewal " => "sidewall",
    "cal able" => "callable",
    "firebal " => "fireball",
    "bacil us" => "bacillus",
    "tortil a" => "tortilla",
    "al ergen" => "allergen",
    "strol er" => "stroller",
    "skil ful" => "skillful",
    "flotil a" => "flotilla",
    "landfal " => "landfall",
    "mil work" => "millwork",
    "gueril a" => "guerilla",
    "snowfal " => "snowfall",
    "bil iard" => "billiard",
    "vil ager" => "villager",
    "tel tale" => "telltale",
    "spil age" => "spillage",
    "il iquid" => "illiquid",
    "fal ible" => "fallible",
    "wel head" => "wellhead",
    "al eyway" => "alleyway",
    "mul igan" => "mulligan",
    "paral ax" => "parallax",
    "disal ow" => "disallow",
    "lol ipop" => "lollipop",
    "pul over" => "pullover",
    "nouvel e" => "nouvelle",
    "fal back" => "fallback",
    "soul ess" => "soulless",
    "bastil e" => "bastille",
    "gravel y" => "gravelly",
    "thal ium" => "thallium",
    "col iery" => "colliery",
    "footwal " => "footwall",
    "handbal " => "handball",
    "shigel a" => "shigella",
    "mil ion" => "million",
    "bil ion" => "billion",
    "overal " => "overall",
    "col ege" => "college",
    "cal ing" => "calling",
    "vil age" => "village",
    "tel ing" => "telling",
    "wil ing" => "willing",
    "total y" => "totally",
    "col ect" => "collect",
    "gal ery" => "gallery",
    "il ness" => "illness",
    "skil ed" => "skilled",
    "al eged" => "alleged",
    "il egal" => "illegal",
    "kil ing" => "killing",
    "instal " => "install",
    "fil ing" => "filling",
    "rol out" => "rollout",
    "col ins" => "collins",
    "ideal y" => "ideally",
    "hol and" => "holland",
    "shal ow" => "shallow",
    "payrol " => "payroll",
    "bil ing" => "billing",
    "maxwel " => "maxwell",
    "bul pen" => "bullpen",
    "bal oon" => "balloon",
    "swal ow" => "swallow",
    "fulfil " => "fulfill",
    "swol en" => "swollen",
    "al ergy" => "allergy",
    "mil ing" => "milling",
    "hal way" => "hallway",
    "stel ar" => "stellar",
    "il icit" => "illicit",
    "sel out" => "sellout",
    "vil ain" => "villain",
    "trol ey" => "trolley",
    "vanil a" => "vanilla",
    "pol ock" => "pollock",
    "bul ish" => "bullish",
    "fatal y" => "fatally",
    "col ier" => "collier",
    "bel ows" => "bellows",
    "bul ock" => "bullock",
    "wil ful" => "willful",
    "col age" => "collage",
    "gal ant" => "gallant",
    "fal out" => "fallout",
    "idyl ic" => "idyllic",
    "goril a" => "gorilla",
    "col ide" => "collide",
    "fal acy" => "fallacy",
    "pol ard" => "pollard",
    "cal ous" => "callous",
    "gal ium" => "gallium",
    "hil top" => "hilltop",
    "bul dog" => "bulldog",
    "bul ion" => "bullion",
    "bal ast" => "ballast",
    "pol ute" => "pollute",
    "pul man" => "pullman",
    "pol ack" => "pollack",
    "al egro" => "allegro",
    "instil " => "instill",
    "eyebal " => "eyeball",
    "col een" => "colleen",
    "gal ows" => "gallows",
    "mal ard" => "mallard",
    "sawmil " => "sawmill",
    "trel is" => "trellis",
    "distil " => "distill",
    "hel ish" => "hellish",
    "pitfal " => "pitfall",
    "shal ot" => "shallot",
    "phal ic" => "phallic",
    "wool en" => "woollen",
    "seagul " => "seagull",
    "nul ify" => "nullify",
    "oddbal " => "oddball",
    "gazel e" => "gazelle",
    "chil er" => "chiller",
    "el ipse" => "ellipse",
    "pul out" => "pullout",
    "til age" => "tillage",
    "gal ing" => "galling",
    "col ate" => "collate",
    "pinbal " => "pinball",
    "rubel a" => "rubella",
    "fal off" => "falloff",
    "lul aby" => "lullaby",
    "scal op" => "scallop",
    "novel a" => "novella",
    "skil et" => "skillet",
    "col ard" => "collard",
    "rosel e" => "roselle",
    "pil age" => "pillage",
    "gal eon" => "galleon",
    "tol way" => "tollway",
    "real y" => "really",
    "fol ow" => "follow",
    "val ey" => "valley",
    "whol y" => "wholly",
    "kil ed" => "killed",
    "fel ow" => "fellow",
    "dol ar" => "dollar",
    "mil er" => "miller",
    "yel ow" => "yellow",
    "fal en" => "fallen",
    "recal " => "recall",
    "sel er" => "seller",
    "al ied" => "allied",
    "kil er" => "killer",
    "bal ot" => "ballot",
    "enrol " => "enroll",
    "bal et" => "ballet",
    "col ar" => "collar",
    "bul et" => "bullet",
    "ful er" => "fuller",
    "hol ow" => "hollow",
    "gal on" => "gallon",
    "rol er" => "roller",
    "cal er" => "caller",
    "thril " => "thrill",
    "wal et" => "wallet",
    "pil ow" => "pillow",
    "pol ed" => "polled",
    "pil ar" => "pillar",
    "tel er" => "teller",
    "cel ar" => "cellar",
    "strol " => "stroll",
    "wil ow" => "willow",
    "uphil " => "uphill",
    "chil y" => "chilly",
    "resel " => "resell",
    "scrol " => "scroll",
    "gal ey" => "galley",
    "fil er" => "filler",
    "pol en" => "pollen",
    "pel et" => "pellet",
    "mul er" => "muller",
    "bal ad" => "ballad",
    "infil " => "infill",
    "al ege" => "allege",
    "hel er" => "heller",
    "mel ow" => "mellow",
    "gril e" => "grille",
    "refil " => "refill",
    "til er" => "tiller",
    "vol ey" => "volley",
    "wil ed" => "willed",
    "gal op" => "gallop",
    "shril " => "shrill",
    "pal et" => "pallet",
    "smel y" => "smelly",
    "al ure" => "allure",
    "wool y" => "woolly",
    "sul en" => "sullen",
    "fel er" => "feller",
    "mil et" => "millet",
    "fil et" => "fillet",
    "mal et" => "mallet",
    "bil er" => "biller",
    "fal ow" => "fallow",
    "pul ey" => "pulley",
    "bil et" => "billet",
    "bel ow" => "bellow",
    "thral " => "thrall",
    "wal op" => "wallop",
    "col ie" => "collie",
    "mol ie" => "mollie",
    "unwel " => "unwell",
    "al ele" => "allele",
    "wal ow" => "wallow",
    "befal " => "befall",
    "cal ow" => "callow",
    "pal id" => "pallid",
    "dol op" => "dollop",
    "vel um" => "vellum",
    "chil i" => "chilli",
    "hol er" => "holler",
    "al ude" => "allude",
    "pal or" => "pallor",
    "squal " => "squall",
    "dal es" => "dalles",
    "tal ow" => "tallow",
    "mul ah" => "mullah",
    "mul et" => "mullet",
    "fil ip" => "fillip",
    "sal ow" => "sallow",
    "col et" => "collet",
    "pael a" => "paella",
    "retel " => "retell",
    "vil us" => "villus",
    "unrol " => "unroll",
    "wil et" => "willet",
    "bil on" => "billon",
    "gul et" => "gullet",
    "bil ow" => "billow",
    "stil " => "still",
    "smal " => "small",
    "al ow" => "allow",
    "ful y" => "fully",
    "shal " => "shall",
    "skil " => "skill",
    "shel " => "shell",
    "bil y" => "billy",
    "dril " => "drill",
    "ral y" => "rally",
    "smel " => "smell",
    "spel " => "spell",
    "sil y" => "silly",
    "hel o" => "hello",
    "sal y" => "sally",
    "vil a" => "villa",
    "hol y" => "holly",
    "gril " => "grill",
    "al ey" => "alley",
    "skul " => "skull",
    "chil " => "chill",
    "bel y" => "belly",
    "mol y" => "molly",
    "spil " => "spill",
    "al oy" => "alloy",
    "stal " => "stall",
    "swel " => "swell",
    "fol y" => "folly",
    "jol y" => "jolly",
    "dol y" => "dolly",
    "tal y" => "tally",
    "bel e" => "belle",
    "dwel " => "dwell",
    "jel y" => "jelly",
    "bul y" => "bully",
    "wil y" => "willy",
    "wal y" => "wally",
    "tel y" => "telly",
    "stul " => "stull",
    "quel " => "quell",
    "fel a" => "fella",
    "hil y" => "hilly",
    "snel " => "snell",
    "cel o" => "cello",
    "fil y" => "filly",
    "al ay" => "allay",
    "bril " => "brill",
    "nel y" => "nelly",
    "quil " => "quill",
    "knol " => "knoll",
    "bal y" => "bally",
    "gul y" => "gully",
    "al ot" => "allot",
    "trol " => "troll",
    "knel " => "knell",
    "l ano" => "llano",
    "drol " => "droll",
    "wal a" => "walla",
    "dal y" => "dally",
    "fril " => "frill",
    "gol y" => "golly",
    "idyl " => "idyll",
    "atol " => "atoll",
    "twil " => "twill",
    "shil " => "shill",
    "l ama" => "llama",
    "sul y" => "sully",
    "kril " => "krill",
    "tul e" => "tulle",
    "cel a" => "cella",
    "del s" => "dells",
    "swil " => "swill",
    "tril " => "trill",
    "cal a" => "calla",
    "lol y" => "lolly",
    "scul " => "scull",
    "dil y" => "dilly",
    "al ee" => "allee",
    "jel o" => "jello",
    "spal " => "spall",
    "pal y" => "pally",
    "hul o" => "hullo",
    "vil i" => "villi",
    "cul y" => "cully",
    "bul a" => "bulla",
    "thil " => "thill",
    "al yl" => "allyl",
    "pril " => "prill",
    "hol a" => "holla",
    "trul " => "trull",
    "quol " => "quoll",
    "fel y" => "felly",
    "scal " => "scall",
    "skel " => "skell",
    "kvel " => "kvell",
    "ahul " => "ahull",
    "al od" => "allod",
    "bul s" => "bulls",
    "bil s" => "bills",
    "bol s" => "bolls",
    "wil " => "will",
    "wel " => "well",
    "ful " => "full",
    "cal " => "call",
    "tel " => "tell",
    "bil " => "bill",
    "sel " => "sell",
    "fal " => "fall",
    "wal " => "wall",
    "hal " => "hall",
    "hil " => "hill",
    "fel " => "fell",
    "bal " => "ball",
    "cel " => "cell",
    "fil " => "fill",
    "bel " => "bell",
    "rol " => "roll",
    "pul " => "pull",
    "kil " => "kill",
    "tal " => "tall",
    "mil " => "mill",
    "hel " => "hell",
    "tol " => "toll",
    "pol " => "poll",
    "til " => "till",
    "bul " => "bull",
    "jil " => "jill",
    "del " => "dell",
    "mal " => "mall",
    "dul " => "dull",
    "hul " => "hull",
    "al y" => "ally",
    "gil " => "gill",
    "dol " => "doll",
    "pil " => "pill",
    "gal " => "gall",
    "yel " => "yell",
    "nul " => "null",
    "lul " => "lull",
    "sil " => "sill",
    "pal " => "pall",
    "gul " => "gull",
    "dil " => "dill",
    "jel " => "jell",
    "mul " => "mull",
    "cul " => "cull",
    "mol " => "moll",
    "bol " => "boll",
    "lol " => "loll",
    "ril " => "rill",
    "vil " => "vill",
    "nil " => "nill",
    "ol a" => "olla",
    "zil " => "zill",
    "il y" => "illy",
    "al s" => "alls",
    "il s" => "ills",
    "el s" => "ells",
    "sal " => "sall",
    "mel " => "mell",
    "lal " => "lall",
    "yil " => "yill",
    "al " => "all",
    "il " => "ill",
    "el " => "ell",
	"pul ed" => "pulled",
	"pul ing" => "pulling",
	"We'l " => "We'll",
	"we'l " => "we'll",
	"you'l " => "you'll",
	"You'l " => "You'll",
	"Careful y" => "Carefully",
	"sel ing" => "selling",
	"Hel o " => "Hello ",
	"rol ed" => "rolled",
	"I'l " => "I'll",
	"Al " => "All",
	"Tinkerbel " => "Tinkerbell",
	"final y" => "finally",
	"sel ing" => "selling",
	"hardbal " => "hardball",
	"He'l " => "He'll",
	"She'l " => "She'll",
	"he'l " => "he'll",
	"she'l " => "she'll",
	"Wel " => "Well",
	"fol owed" => "followed",
	"fol owing" => "following",
	"stil ness" => "stillness",
	"bul 's" => "bull's",
	"bul s" => "bulls",
	"awful y" => "awfully",
	"cel s" => "cells",
	"al owing" => "allowing",
	"hil s" => "hills",
	"wal s" => "walls",
	"brial iantly" => "brialliantly",
	"il uminated" => "illuminated",
	"il uminating" => "illuminating",
	"il uminates" => "illuminates",
	"smal er" => "smaller",
	"col ects" => "collects",
	"col ected" => "collected",
	"rol s" => "rolls",
	"fil ed" => "filled",
	"Cal " => "Call",
	"cal ed" => "called",
	"Ya'l " => "Ya'll",
	"ya'l " => "ya'll",
	"gel ed" => "gelled",
	"overgel ed" => "overgelled",
	"overal s" => "overalls",
	"spel ed" => "spelled",
	"thoughtful y" => "thoughtfully",
	"control ed" => "controlled",
	"control ing" => "controlling",
	"Actual y" => "Actually",
	"Tel " => "Tell",
	"Hel " => "Hell",
	"national y" => "nationally",
	"it'l " => "it'll",
	"It'l " => "It'll",
	"ful -bodied" => "full-bodied",
	"col ecting" => "collecting",
	"emotional y" => "emotionally",
	"physical y" => "physically",
	"mental y" => "mentally",
	"bil able" => "billable",
	"nonbil able" => "nonbillable",
	"non-bil able" => "non-billable",
	"citronel a" => "citronella",
	"al owance" => "allowance",
	"equal y" => "equally",
	"biul ets" => "biullets",
	"careful y" => "carefully",
	"level y" => "levelly",
	"level ed" => "levelled",
);

my $regex = join "|", map { quotemeta } sort { $b cmp $a } keys %replace;

$regex = qr/$regex/;

# # Open Each Text File
foreach (@textfiles) {
    my $textfile = "html/" . $_;
    my $textfile_out = $textfile =~ s/(\.txt|\.html)/_clean$1/gr;

    print STDOUT "\n\nCleaning [$textfile] and sending output to [$textfile_out]\n";
    print STDOUT "--------------------------------------------------------------------------------\n";

    my $i = 0;
    my @all_matches;
    open (FH, '<', $textfile) or die "Can't open input file '$textfile': $!";
    open (FHOUT, '>', $textfile_out) or die "Can't open output file '$textfile_out': $!";
    while (<FH>) {
        my $line = $_;
        
        # get a list of the matches
        my @matches = $line =~ /(?<=[ -—–…])($regex)(?=[ -,.—–…])/ig;
        # and count them
        my $count = scalar @matches;

        # fix any words that matched
        $line =~ s/(?<=[ -—–…])($regex)(?=[ -,.—–…])/$replace{$1}/ig;

        #output the line to the cleaned file
        print FHOUT $line; 

        # count the instance of a match
        $i += $count;
        #add the matches to the list of all matches for the file
        @all_matches = uniq(@all_matches, @matches);

    }
    
    close FH or die "Can't close file: $!";
    close FHOUT or die "Can't close file: $_";

    my $uniq = scalar @all_matches; # count unique matches

    print STDOUT "Cleaned $i instances of $uniq words. \n";
    print STDOUT join "; ", @all_matches;
    print STDOUT ".\n\n";
}